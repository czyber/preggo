# =============================================================================
#                          BACKEND ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and configure all required values
# 
# SECURITY NOTICE: Never commit the actual .env file to version control!
# All placeholder values MUST be replaced before deploying to production.
#
# For development: Most default values will work with proper Supabase setup
# For production: ALL values must be properly configured and validated
# =============================================================================

# =============================================================================
# PROJECT CONFIGURATION
# =============================================================================

# Application name (used in API documentation and logs)
PROJECT_NAME="Preggo API"

# Application version (semantic versioning recommended)
VERSION="0.1.0"

# API version prefix (usually "/api/v1")
API_V1_STR="/api/v1"

# Environment: development, staging, production, test
# REQUIRED: Must be one of the allowed values
# VALIDATION: Triggers additional security checks in production
ENVIRONMENT="development"

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed origins for CORS (comma-separated list or JSON array)
# DEVELOPMENT: Include local development URLs
# PRODUCTION: Include only trusted domains
# VALIDATION: localhost origins will trigger warnings in production
BACKEND_CORS_ORIGINS=["http://localhost:3000","http://localhost:3001","https://localhost:3000","https://localhost:3001"]

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database connection URL
# REQUIRED: Must be a valid PostgreSQL connection string
# FORMAT: postgresql://username:password@host:port/database
# SUPABASE: Use your Supabase database URL from the dashboard
# VALIDATION: Cannot use localhost in production environment
DATABASE_URL="postgresql://postgres:password@localhost:5432/preggo"

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Secret key for JWT signing and session security
# REQUIRED: Must be at least 32 characters (64+ for production)
# GENERATION: Use: openssl rand -hex 32
# VALIDATION: Placeholder values are rejected, stronger requirements in production
SECRET_KEY="your-secret-key-here-change-this-in-production"

# JWT token expiration time in minutes (default: 8 days)
ACCESS_TOKEN_EXPIRE_MINUTES=11520

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
# Get these values from your Supabase project dashboard:
# https://app.supabase.com/project/YOUR-PROJECT-ID/settings/api

# Supabase project URL
# REQUIRED: Must be a valid Supabase URL
# FORMAT: https://your-project-id.supabase.co (exactly 20 characters for project ID)
# VALIDATION: Must use HTTPS, must match Supabase URL pattern
# SECURITY: This is safe to expose in frontend applications
SUPABASE_URL="https://your-project-id.supabase.co"

# Supabase Anonymous Key (public key)
# REQUIRED: JWT token with 'anon' role
# USAGE: Used for client-side operations and public API access
# VALIDATION: Must be valid JWT with 'anon' role
# SECURITY: Safe to expose in frontend applications
SUPABASE_ANON_KEY="your-anon-key-here"

# Supabase Service Role Key (private key)
# REQUIRED: JWT token with 'service_role' role
# USAGE: Backend-only operations, bypasses RLS policies
# VALIDATION: Must be valid JWT with 'service_role' role
# SECURITY: NEVER expose to frontend! Backend use only!
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"

# Supabase JWT Secret
# REQUIRED: Base64-encoded secret for JWT verification
# USAGE: Verifying JWT tokens from Supabase Auth
# FORMAT: Base64-encoded string (must decode to at least 32 bytes)
# LOCATION: Found in Supabase Dashboard > Settings > API > JWT Settings
# VALIDATION: Must be valid base64 with sufficient entropy
# SECURITY: NEVER expose to frontend! Backend use only!
SUPABASE_JWT_SECRET="your-jwt-secret-here"

# =============================================================================
# SUPABASE STORAGE CONFIGURATION
# =============================================================================

# Default storage bucket name for pregnancy media
# SETUP: Must be created in Supabase Storage dashboard
SUPABASE_STORAGE_BUCKET="pregnancy-media"

# Storage base URL (auto-generated from SUPABASE_URL if not provided)
# OPTIONAL: Usually auto-configured
# SUPABASE_STORAGE_BASE_URL=""

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================

# Maximum file size in bytes (50MB default)
MAX_FILE_SIZE=52428800

# Allowed image MIME types (comma-separated)
ALLOWED_IMAGE_TYPES=["image/jpeg","image/png","image/webp","image/gif"]

# Allowed video MIME types (comma-separated)
ALLOWED_VIDEO_TYPES=["video/mp4","video/webm","video/ogg"]

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable real-time updates via Supabase Realtime
ENABLE_REAL_TIME_UPDATES=true

# Enable push notifications
ENABLE_PUSH_NOTIFICATIONS=true

# Enable email notifications
ENABLE_EMAIL_NOTIFICATIONS=true

# Enable family invitation features
ENABLE_FAMILY_INVITATIONS=true

# Enable memory book generation (future feature)
ENABLE_MEMORY_BOOK_GENERATION=false

# =============================================================================
# RATE LIMITING
# =============================================================================

# Requests per minute per IP address
RATE_LIMIT_PER_MINUTE=60

# Burst capacity for rate limiting
RATE_LIMIT_BURST=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEVELOPMENT: DEBUG or INFO
# PRODUCTION: WARNING or ERROR
LOG_LEVEL="INFO"

# Store logs in database
LOG_TO_DATABASE=true

# Store logs in files
LOG_TO_FILE=true

# =============================================================================
# APPLICATION SPECIFIC CONFIGURATION
# =============================================================================

# Pregnancy tracking configuration
DEFAULT_PREGNANCY_DURATION_WEEKS=40
MIN_PREGNANCY_WEEK=0
MAX_PREGNANCY_WEEK=42

# Family sharing limits
MAX_FAMILY_GROUPS=10
MAX_MEMBERS_PER_GROUP=50
INVITATION_EXPIRY_DAYS=7

# Content limits
MAX_POST_LENGTH=2000
MAX_COMMENT_LENGTH=500
MAX_IMAGES_PER_POST=10

# =============================================================================
# VALIDATION CHECKLIST FOR PRODUCTION
# =============================================================================
# Before deploying to production, ensure:
#
# ✓ ENVIRONMENT is set to "production"
# ✓ SECRET_KEY is a strong, randomly generated key (64+ characters)
# ✓ All Supabase credentials are real values from your project
# ✓ DATABASE_URL points to your production database
# ✓ BACKEND_CORS_ORIGINS includes only trusted domains
# ✓ LOG_LEVEL is set to WARNING or ERROR
# ✓ No placeholder values remain (app will fail to start if detected)
#
# The application will perform automatic validation on startup and
# refuse to start if critical configuration issues are detected.
# =============================================================================
